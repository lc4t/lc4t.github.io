---
import Record from "@layouts/Records.astro";

import { getCollection } from "astro:content";

const diaries = await getCollection(
  "blog",
  a => a.slug.startsWith("record/diary/") && !a.data.draft
);

diaries.sort(
  (a, b) => b.data.pubDatetime.getTime() - a.data.pubDatetime.getTime()
);

const lists = await getCollection(
  "blog",
  a => a.slug.startsWith("record/list/") && !a.data.draft
);

lists.sort(
  (a, b) => b.data.pubDatetime.getTime() - a.data.pubDatetime.getTime()
);

const images = await getCollection(
  "blog",
  a => a.slug.startsWith("record/image/") && !a.data.draft
);

images.sort(
  (a, b) => b.data.pubDatetime.getTime() - a.data.pubDatetime.getTime()
);
---

<Record diaries={diaries} lists={lists} images={images} />

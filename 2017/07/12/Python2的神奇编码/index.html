<!DOCTYPE html>
<html lang="z">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    
    <title>Python2çš„ç¥å¥‡ç¼–ç  | lc4t&#39;s blog</title>
    <meta name="renderer" content="webkit">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <meta name="description" content="ä¸€äº›éšæƒ³å’Œç¬”è®°">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Python2çš„ç¥å¥‡ç¼–ç  | lc4t&#39;s blog">
    <meta name="twitter:description" content="ä¸€äº›éšæƒ³å’Œç¬”è®°">

    <meta property="og:type" content="article">
    <meta property="og:title" content="Python2çš„ç¥å¥‡ç¼–ç  | lc4t&#39;s blog">
    <meta property="og:description" content="ä¸€äº›éšæƒ³å’Œç¬”è®°">

    
    <meta name="author" content="lc4t">
    
    
<link rel="stylesheet" href="/css/vno.css">

    
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css">


    
    <link rel="icon" href="/images/icon.png">
    

    <meta name="generator" content="hexo"/>
    
    <link rel="alternate" type="application/rss+xml" title="lc4t&#39;s blog" href="/atom.xml">
    

    <link rel="canonical" href="http://example.com/2017/07/12/Python2%E7%9A%84%E7%A5%9E%E5%A5%87%E7%BC%96%E7%A0%81/"/>

                 
</head>

<body class="home-template no-js">
    
<script src="//cdn.bootcss.com/jquery/2.1.4/jquery.min.js"></script>

    
<script src="/js/main.js"></script>

    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>

    
<header class="panel-cover panel-cover--collapsed" style="background-image: url(/images/rem-pa.png)">
  <div class="panel-main">
    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        <a href="/" title="å‰å¾€ lc4t&#39;s blog çš„ä¸»é¡µ"><img src="/images/avatar.jpg" width="80" alt="lc4t&#39;s blog logo" class="panel-cover__logo logo" /></a>
        <h1 class="panel-cover__title panel-title"><a href="/" title="link to homepage for lc4t&#39;s blog">lc4t&#39;s blog</a></h1>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">ä¸€äº›éšæƒ³å’Œç¬”è®°</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />

        <div class="navigation-wrapper">
          <div>
          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">
              <li class="navigation__item"><a href="/#blog" title="Visit the blog" class="blog-button">Blog</a></li>
            
              <li class="navigation__item"><a href="/friends">Friends</a></li>
            
              <li class="navigation__item"><a href="/tags">Tags</a></li>
            
              <li class="navigation__item"><a href="/about">About</a></li>
            
            </ul>
          </nav>
          </div>
          <div>
          <nav class="cover-navigation navigation--social">
  <ul class="navigation">

  <!-- Weibo-->
  

  <!-- Github -->
  
  <li class="navigation__item">
    <a href="https://github.com/lc4t" title="GitHub" target="_blank">
      <i class='social fa fa-github'></i>
      <span class="label">Github</span>
    </a>
  </li>


<!-- Stack Overflow -->
        

  <!-- Google Plus -->
  

<!-- Facebook -->

  
<!-- Twitter -->

  

  <li class="navigation__item">
    <a href="/atom.xml" title="RSS" target="_blank">
      <i class='social fa fa-rss'></i>
      <span class="label">RSS</span>
    </a>
  </li>



  </ul>
</nav>

          </div>
        </div>

      </div>

    </div>

    <div class="panel-cover--overlay cover-purple"></div>
  </div> 
</header>

    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <article class="post-container post-container--single">

  <header class="post-header">
    <div class="post-meta">
      <time datetime="2017-07-12T02:00:00.000Z" class="post-list__meta--date date">2017-07-12</time> &#8226; <span class="post-meta__tags tags">äº 
  <a class="-none-link" href="/tags/python/" rel="tag">python</a>
 </span>
      <span class="page-pv">
       Read <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span>
      </span> 
   
    </div>
    <h1 class="post-title">Python2çš„ç¥å¥‡ç¼–ç </h1>
  </header>

  <section class="post">
    <p>å°è¯•è§£å†³Pythonç¼–ç é—®é¢˜</p>
<span id="more"></span>
<h3 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h3><h4 id="ç¼–ç åŸºç¡€"><a href="#ç¼–ç åŸºç¡€" class="headerlink" title="ç¼–ç åŸºç¡€"></a>ç¼–ç åŸºç¡€</h4><ol>
<li>Unicodeæ˜¯ä¸€ç§å­—ç¬¦æ ‡å‡†ï¼ŒGBKã€UTF-8éƒ½æ˜¯å…¶å®ç°ï¼Œæˆ‘ä»¬è¯´çš„ç¼–ç åº”å½“æ˜¯åè€…ï¼ˆå³å…·ä½“çš„å®ç°ï¼‰</li>
<li>Windowsé»˜è®¤ç¼–ç ä¸º<strong>GBK</strong>ï¼ŒLinux/MacOSä¸º<strong>UTF-8</strong>ï¼Œè¿™ä¼šå½±å“pythonæ–‡ä»¶IOï¼Œå…¶å®ä¸å½±å“æœ¬èº«çš„ç¼–ç </li>
<li>Pythonæœ‰é»˜è®¤å­—ç¬¦ç±»å‹å’Œé»˜è®¤å­—èŠ‚ç±»å‹</li>
<li>åº•å±‚å­˜å‚¨ç”¨çš„æ˜¯äºŒè¿›åˆ¶ï¼ˆå­—èŠ‚ç±»å‹åºåˆ—ï¼‰ï¼Œä½¿ç”¨ä»€ä¹ˆç¼–ç æ¥è¯†åˆ«å®ƒå†³å®šäº†å®ƒæ˜¾ç¤ºä¸ºä¹±ç è¿˜æ˜¯æœŸæœ›å€¼</li>
</ol>
<h4 id="decode-encodeæ–¹æ³•"><a href="#decode-encodeæ–¹æ³•" class="headerlink" title="decode/encodeæ–¹æ³•"></a>decode/encodeæ–¹æ³•</h4><p>ä¸è®ºåœ¨python2è¿˜æ˜¯python3ï¼Œencodeå³è½¬æ¢ä¸ºå­—èŠ‚ç±»å‹ï¼Œdecodeå³è½¬æ¢ä¸ºå­—ç¬¦ä¸²ç±»å‹ï¼Œåªä¸è¿‡ä¸¤ä¸ªç‰ˆæœ¬çš„pythonå¯¹å­—èŠ‚ç±»å‹ã€å­—ç¬¦ä¸²ç±»å‹åšäº†ä¿®æ”¹</p>
<p>é‚£ä¹ˆï¼Œç†è®ºä¸Šå­—èŠ‚ç±»å‹åªåº”è¯¥æœ‰decodeæ–¹æ³•ï¼Œå­—ç¬¦ä¸²ç±»å‹åªåº”è¯¥æœ‰encodeæ–¹æ³•æ‰å¯¹å§ï¼ˆpython3æ˜¯è¿™æ ·çš„ï¼‰ï¼Ÿ</p>
<p>ä½†æ˜¯ç”±äºpython2çš„è®¾è®¡ç¼ºé™·ï¼Œå³ä¸¤è€…åŒæ—¶æœ‰ä¸¤ç§æ–¹æ³•</p>
<p>å¦å¤–ï¼Œåœ¨Python2ä¸­ï¼Œä¸¤ä¸ªæ–¹æ³•çš„é»˜è®¤å‚æ•°ä¸º<strong>encoding=â€™asciiâ€™<strong>ï¼Œè€Œpython3ä¸­ä¸º</strong>utf-8</strong>ï¼Œè¿™å–å†³äºpythonç¼–ç ï¼Œå³<strong>sys.getdefaultencoding()</strong></p>
<h3 id="Python2æƒ…å½¢"><a href="#Python2æƒ…å½¢" class="headerlink" title="Python2æƒ…å½¢"></a>Python2æƒ…å½¢</h3><h4 id="strå­—èŠ‚ç±»å‹"><a href="#strå­—èŠ‚ç±»å‹" class="headerlink" title="strå­—èŠ‚ç±»å‹"></a>strå­—èŠ‚ç±»å‹</h4><p>åœ¨ä½¿ç”¨å¼•å·å¼•ä½çš„æƒ…å½¢ï¼Œé»˜è®¤ä½¿ç”¨<strong>str</strong>ç±»å‹ï¼Œè¿™æ˜¯å·²ç»<strong>ç¼–ç è¿‡çš„å­—èŠ‚åºåˆ—</strong>ï¼Œå³<strong>bytes</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; type(&#39;a&#39;)</span><br><span class="line">&lt;type &#39;str&#39;&gt;</span><br><span class="line">&gt;&gt;&gt; type(&#39;å“ˆå“ˆ&#39;)</span><br><span class="line">&lt;type &#39;str&#39;&gt;</span><br><span class="line">&gt;&gt;&gt; type(&#39;ğŸ˜‘&#39;)</span><br><span class="line">&lt;type &#39;str&#39;&gt;</span><br></pre></td></tr></table></figure>


<p>å­—èŠ‚åºåˆ—çš„ç‰¹ç‚¹æ˜¯\x ï¼Œæ¯”å¦‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; &#39;å“ˆå“ˆ&#39;</span><br><span class="line">&#39;\xe5\x93\x88\xe5\x93\x88&#39;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œ\xæ˜¯è¡¨ç¤ºå…¶ä¸ºå­—èŠ‚åºåˆ—ï¼Œå³ç›´æ¥è¯´æ˜äº†16è¿›åˆ¶ä¸²ä¸º <strong>e59388e59388</strong>ï¼Œè¿™é‡Œå¯ä»¥çœ‹åˆ°<strong>å“ˆ</strong>è¢«ç¼–ç ä¸ºäº†16è¿›åˆ¶ä¸²<strong>e59388</strong></p>
<p>è¿™è¯´æ˜åœ¨Python2ã€MacOSä¸‹ï¼Œé»˜è®¤ä¸€ä¸ªæ±‰å­—å ç”¨3å­—èŠ‚ï¼Œå®é™…ä¸Šï¼Œè¿™æ˜¯å› ä¸ºä¸€ä¸ªä¸­æ–‡å­—è¢«UTF-8ç¼–ç ä¸ºäº†3å­—èŠ‚</p>
<p>éªŒè¯ä¸€ä¸‹â€™å“ˆå“ˆâ€™æ˜¯ä»€ä¹ˆç¼–ç </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; chardet.detect(&#39;å“ˆå“ˆ&#39;)</span><br><span class="line">&#123;&#39;confidence&#39;: 0.7525, &#39;language&#39;: &#39;&#39;, &#39;encoding&#39;: &#39;utf-8&#39;&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨æ­¤è¦é¢å¤–è¯´ä¸€ä¸‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; &#39;\xe5\x93\x88\xe5\x93\x88&#39;.decode(&#39;utf-8&#39;)</span><br><span class="line">u&#39;\u54c8\u54c8&#39;</span><br><span class="line">&gt;&gt;&gt; print(u&#39;\u54c8\u54c8&#39;)</span><br><span class="line">å“ˆå“ˆ</span><br></pre></td></tr></table></figure>

<p>è€Œpython3ä¸­ï¼Œbytesæ˜¯æ²¡æœ‰decodeæ–¹æ³•çš„ï¼Œpython2å‘ä»€ä¹ˆäº†ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p><strong>python2çš„strç±»å‹ä¹Ÿæœ‰encodeæ–¹æ³•ï¼Œè¿™æ˜¯è®¾è®¡ç¼ºé™·</strong></p>
<p>å¦å¤–æˆ‘ä»¬åœ¨Windowsã€Python2ä¸‹å°è¯•ä¸€ä¸‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; &#39;å“ˆå“ˆ&#39;</span><br><span class="line">&#39;\xb9\xfe\xb9\xfe&#39;</span><br></pre></td></tr></table></figure>

<p>å’ŒMacOSæƒ…å½¢ä¸åŒï¼Œä½†æ˜¯åŒæ ·æ˜¯<strong>å“ˆå“ˆ</strong>ï¼Œä¸ºä»€ä¹ˆæ˜¾ç¤ºçš„ç»“æœä¸åŒå‘¢ï¼Ÿ</p>
<p>è¿™å°±æ˜¯bytesï¼Œç®€å•æ¥è¯´ï¼Œbytesæ˜¯å­˜å‚¨åœ¨ç‰©ç†è®¾å¤‡ä¸Šçš„å®é™…å€¼ï¼Œè‡³äºæ€ä¹ˆå­˜ã€æ€ä¹ˆç†è§£å®ƒï¼Œå–å†³äº<strong>UTF-8ã€GBK</strong>è¿™æ ·çš„å®ç°æ ‡å‡†</p>
<p>å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨ç¡®è®¤ä½¿ç”¨ä»€ä¹ˆæ ‡å‡†ï¼Œä¾‹å¦‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="string">&#x27;\xb9\xfe\xb9\xfe&#x27;</span>.decode(<span class="string">&#x27;gbk&#x27;</span>))</span><br><span class="line">å“ˆå“ˆ</span><br></pre></td></tr></table></figure>



<h4 id="unicodeå­—ç¬¦ä¸²ç±»å‹"><a href="#unicodeå­—ç¬¦ä¸²ç±»å‹" class="headerlink" title="unicodeå­—ç¬¦ä¸²ç±»å‹"></a>unicodeå­—ç¬¦ä¸²ç±»å‹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; type(u&#39;å“ˆå“ˆ&#39;)</span><br><span class="line">&lt;type &#39;unicode&#39;&gt;</span><br><span class="line">&gt;&gt;&gt; type(u&#39;a&#39;)</span><br><span class="line">&lt;type &#39;unicode&#39;&gt;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢è¯´è¿‡ï¼Œunicodeæ˜¯ä¸€ç§æ ‡å‡†ï¼Œè¿™é‡Œpython2å°†<strong>unicode</strong>ä½œä¸ºä¸€ç§å­—ç¬¦ä¸²ç±»å‹ï¼Œå¯ä»¥çœ‹åšä¸€ç§å®ç°</p>
<p>åœ¨MacOSã€Windowsä¸Šï¼Œä¸‹é¢çš„è¿”å›æ˜¯ç›¸åŒçš„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; u&#39;å“ˆå“ˆ&#39;</span><br><span class="line">u&#39;\u54c8\u54c8&#39;</span><br><span class="line">&gt;&gt;&gt; type(u&#39;å“ˆå“ˆ&#39;)</span><br><span class="line">&lt;type &#39;unicode&#39;&gt;</span><br></pre></td></tr></table></figure>

<p>åœ¨å­—ç¬¦ä¸²å‰é¢çš„\uè¡¨ç¤ºå…¶åé¢ä¸º<strong>unicode</strong>å­—ç¬¦ä¸²ï¼Œç”±äºå…¶æœ¬èº«æ˜¯ä¸€ç§å®ç°ï¼Œé‚£ä¹ˆåœ¨Windowsã€MacOSä¸Šå°±ä¸ä¼šæœ‰åŒºåˆ«ï¼Œè¿™ç‚¹ä¸strç±»å‹ä¸åŒ</p>
<h3 id="Python3-æƒ…å½¢"><a href="#Python3-æƒ…å½¢" class="headerlink" title="Python3 æƒ…å½¢"></a>Python3 æƒ…å½¢</h3><h4 id="byteså­—èŠ‚ç±»å‹"><a href="#byteså­—èŠ‚ç±»å‹" class="headerlink" title="byteså­—èŠ‚ç±»å‹"></a>byteså­—èŠ‚ç±»å‹</h4><p>åœ¨Python3ä¸­å¼•å…¥äº†bâ€™â€™è¡¨ç¤ºå­—èŠ‚ç±»å‹ï¼Œä¸”typeä½¿ç”¨äº†bytes</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; b&#39;\xe5\x93\x88\xe5\x93\x88&#39;</span><br><span class="line">b&#39;\xe5\x93\x88\xe5\x93\x88&#39;</span><br><span class="line">&gt;&gt;&gt; type(b&#39;\xe5\x93\x88\xe5\x93\x88&#39;)</span><br><span class="line">&lt;class &#39;bytes&#39;&gt;</span><br></pre></td></tr></table></figure>

<p>å¹¶ä¸”python3ä¸å…è®¸å­—èŠ‚ã€å­—ç¬¦ä¸²ç±»å‹éšå¼è½¬æ¢ï¼Œå¿…é¡»ä½¿ç”¨encoded/decodeæ–¹å¼ï¼Œç”±æ­¤å¾ˆå¤šåº“çš„è¿”å›å€¼è¦å¤šåŠ ä¸€ä¸ªdecodeäº†</p>
<h4 id="strå­—ç¬¦ä¸²ç±»å‹"><a href="#strå­—ç¬¦ä¸²ç±»å‹" class="headerlink" title="strå­—ç¬¦ä¸²ç±»å‹"></a>strå­—ç¬¦ä¸²ç±»å‹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&gt;&gt;&gt; &#39;å“ˆå“ˆ&#39;</span><br><span class="line">&#39;å“ˆå“ˆ&#39;</span><br><span class="line">&gt;&gt;&gt; type(&#39;å“ˆå“ˆ&#39;)</span><br><span class="line">&lt;class &#39;str&#39;&gt;</span><br></pre></td></tr></table></figure>

<p>python3ä½¿ç”¨äº†strï¼Œå³å¼•å·å¼•ä½çš„æ–¹å¼è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¹Ÿä¸éœ€è¦ä½¿ç”¨\uæ¥ç‰¹æ„å£°æ˜</p>
<h4 id="Python2çš„ç¼–ç é—®é¢˜"><a href="#Python2çš„ç¼–ç é—®é¢˜" class="headerlink" title="Python2çš„ç¼–ç é—®é¢˜"></a>Python2çš„ç¼–ç é—®é¢˜</h4><p>æœ‰ä¸€ä¸ªæ ¸å¿ƒçš„è¯¯å¯¼åœ¨äºï¼Œstrå’Œunicodeæ˜¯ä¸¤ç§ä¸åŒçš„æ•°æ®ç±»å‹ï¼Œä½†æ˜¯ååå¯ä»¥æ··ç”¨ï¼ˆpython2çš„strå’ŒunicodeåŒæ˜¯ä¸€ä¸ªçˆ¶ç±»<strong>basestring</strong>ï¼‰</p>
<p>è€Œæ··ç”¨æ—¶éšå¼è½¬æ¢ä½¿ç”¨çš„æ˜¯ç¯å¢ƒé»˜è®¤ç¼–ç (ascii)</p>
<p>åœ¨python2ä¸­</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; base64.b64encode(u&#39;abc&#39;)</span><br><span class="line">&#39;YWJj&#39;</span><br><span class="line">&gt;&gt;&gt; base64.b64encode(&#39;abc&#39;)</span><br><span class="line">&#39;YWJj&#39;</span><br></pre></td></tr></table></figure>

<p>åœ¨python3ä¸­</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; base64.b64encode(&#39;abc&#39;)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span><br><span class="line">  File &quot;&#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;python3&#x2F;3.6.1&#x2F;Frameworks&#x2F;Python.framework&#x2F;Versions&#x2F;3.6&#x2F;lib&#x2F;python3.6&#x2F;base64.py&quot;, line 58, in b64encode</span><br><span class="line">    encoded &#x3D; binascii.b2a_base64(s, newline&#x3D;False)</span><br><span class="line">TypeError: a bytes-like object is required, not &#39;str&#39;</span><br><span class="line">&gt;&gt;&gt; base64.b64encode(b&#39;abc&#39;)</span><br><span class="line">b&#39;YWJj&#39;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œæ˜¯python2çš„unicodeå‘stréšå¼è½¬æ¢ï¼Œä¸‹é¢è¿™ä¸ªä¾‹å­æ›´å¥½ç†è§£</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; &#39;abc&#39; + u&#39;abc&#39;</span><br><span class="line">u&#39;abcabc&#39;</span><br><span class="line">&gt;&gt;&gt; type(&#39;abc&#39; + u&#39;abc&#39;)</span><br><span class="line">&lt;type &#39;unicode&#39;&gt;</span><br></pre></td></tr></table></figure>

<p>è€Œpython3ä¸­è¿™æ ·æ˜¯ä¸å…è®¸çš„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; &#39;abc&#39; + b&#39;abc&#39;</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span><br><span class="line">TypeError: must be str, not bytes</span><br></pre></td></tr></table></figure>

<p><strong>å…¶æ¬¡ï¼Œpythonå­˜åœ¨é»˜è®¤çš„ç¼–ç å’Œå‚æ•°</strong></p>
<p>åœ¨python2ä¸­ï¼Œencodeã€decodeçš„å‚æ•°ä¸ºasciiï¼Œè¿™å¯¼è‡´äº†åªæœ‰å¯¥å¯¥å­—æ¯æ•°å­—å¯ä»¥é¡ºåˆ©é€šå…³ï¼Œå…¶ä»–çš„ä¸æŒ‡å®šç¼–ç å¿…å®šæŠ¥é”™</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; u&#39;abc&#39;.encode()</span><br><span class="line">&#39;abc&#39;</span><br><span class="line">&gt;&gt;&gt; u&#39;æˆ‘è¦æŠ¥é”™&#39;.encode()</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span><br><span class="line">UnicodeEncodeError: &#39;ascii&#39; codec can&#39;t encode characters in position 0-3: ordinal not in range(128)</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œçš„é”™è¯¯æ—¶è¯´ï¼Œ<strong>å®ƒæ²¡æ³•ç”¨asciiè¯†åˆ«è¿™ä¸ªä¸­æ–‡çš„utf-8ç¼–ç </strong></p>
<p>å› ä¸ºå­—èŠ‚æ˜¯æ— å›½ç•Œçš„ï¼Œç¼–ç å®ç°æ˜¯æœ‰åè§çš„ï¼Œè¿™é‡Œæƒ³è¦æŠŠunicodeè½¬ä¸ºstrï¼Œè€Œencodeé»˜è®¤ä½¿ç”¨asciiæ–¹å¼æ¥è½¬æ¢ï¼Œ</p>
<p>ä½†æ˜¯è¿™é‡Œæ˜¯ä¸­æ–‡ï¼Œunicode-&gt;asciiè½¬æ¢å¤±è´¥ï¼ˆè¶Šç•Œï¼‰</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; u&#39;abcå•Š&#39;.encode()</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span><br><span class="line">UnicodeEncodeError: &#39;ascii&#39; codec can&#39;t encode character u&#39;\u554a&#39; in position 3: ordinal not in range(128)</span><br><span class="line">&gt;&gt;&gt; u&#39;\u0061\u0062\u0063å•Š&#39;</span><br><span class="line">u&#39;abc\u554a&#39;</span><br></pre></td></tr></table></figure>

<h4 id="æš´åŠ›çš„è§£å†³æ–¹æ¡ˆ"><a href="#æš´åŠ›çš„è§£å†³æ–¹æ¡ˆ" class="headerlink" title="æš´åŠ›çš„è§£å†³æ–¹æ¡ˆ"></a>æš´åŠ›çš„è§£å†³æ–¹æ¡ˆ</h4><p>åœ¨<strong>ä¸èƒ½ä½¿ç”¨Python3</strong>çš„æƒ…å†µä¸‹ï¼Œ<strong>ç»Ÿä¸€ç¼–ç </strong>æ˜¯ä½ å”¯ä¸€çš„å‡ºè·¯ï¼Œæœ€å¥½åŠ ä¸Šæ–‡ä»¶ä¿å­˜ç¼–ç å£°æ˜ # -*- coding: utf-8 -*-</p>
<p>å¼ºçƒˆåå¯¹ä½¿ç”¨sys.setdefaultencoding()ï¼Œå› ä¸ºå‡ ä¹æ‰€æœ‰é—®é¢˜éƒ½å¯ä»¥é€šè¿‡encode/decodeè§£å†³ï¼Œä¸”<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/28657010/dangers-of-sys-setdefaultencodingutf-8">Dangers of sys.setdefaultencoding(â€˜utf-8â€™)</a></p>
<p>é¦–å…ˆæ˜ç¡®è¿›å…¥çš„å­—ç¬¦ä¸²æ˜¯ä»€ä¹ˆç¼–ç ï¼Œä½¿ç”¨è¿™ä¸ªç¼–ç å°†ä¹‹encodeä¸ºå­—èŠ‚ç±»å‹ï¼Œå°±å¯ä»¥éšæ„è½¬æ¢äº†ï¼Œä¸ºäº†ä»¥åå…¼å®¹ï¼Œä½¿ç”¨UTF-8æ˜¯ä¸€ç§å¥½æ–¹æ¡ˆ</p>
<h4 id="ä¸€èˆ¬åŸåˆ™"><a href="#ä¸€èˆ¬åŸåˆ™" class="headerlink" title="ä¸€èˆ¬åŸåˆ™"></a>ä¸€èˆ¬åŸåˆ™</h4><p>æ–‡æœ¬ä½¿ç”¨å­—ç¬¦ä¸²ç±»å‹ï¼Œé€šä¿¡ã€ç½‘ç»œã€IOæ¥å£ä½¿ç”¨å­—èŠ‚ç±»å‹</p>

  </section>

</article>

<section class="read-more">
           
    
               
            <div class="read-more-item">
                <span class="read-more-item-dim">Newer Post</span>
                <h2 class="post-list__post-title post-title"><a href="/2017/07/21/pythonè§£æjsæ–¹æ¡ˆ/" title="pythonè§£æjsæ–¹æ¡ˆ">pythonè§£æjsæ–¹æ¡ˆ</a></h2>
                <p class="excerpt">
                
                åœ¨Pythonçˆ¬è™«çš„æ—¶å€™é‡åˆ°çš„JSï¼Œå‡ ç§ç­–ç•¥
                &hellip;
                </p>
                <div class="post-list__meta"><time datetime="2017-07-21T02:00:00.000Z" class="post-list__meta--date date">2017-07-21</time> &#8226; <span class="post-list__meta--tags tags">äº 
  <a class="-none-link" href="/tags/python/" rel="tag">python</a>
</span><a class="btn-border-small" href="/2017/07/21/pythonè§£æjsæ–¹æ¡ˆ/"></a></div>
                           
            </div>
        
        
               
            <div class="read-more-item">
                <span class="read-more-item-dim">Older Post</span>
                <h2 class="post-list__post-title post-title"><a href="/2017/05/17/Senderéƒ¨ç½²/" title="Senderéƒ¨ç½²">Senderéƒ¨ç½²</a></h2>
                <p class="excerpt">
                
                

RabbitMQrpm -Uvh http://www.rabbitmq.com/releases/erlang/erlang-18.1-1.el7.centos.x86_64.rpm
rpm -Uvh http://www.rabbitmq.com/releases/rabbitmq-serv
                &hellip;
                </p>
                <div class="post-list__meta"><time datetime="2017-05-16T19:42:04.000Z" class="post-list__meta--date date">2017-05-17</time> &#8226; <span class="post-list__meta--tags tags">äº 
  <a class="-none-link" href="/tags/Django/" rel="tag">Django</a>, <a class="-none-link" href="/tags/Nginx/" rel="tag">Nginx</a>, <a class="-none-link" href="/tags/Vue/" rel="tag">Vue</a>, <a class="-none-link" href="/tags/centos/" rel="tag">centos</a>, <a class="-none-link" href="/tags/nodejs/" rel="tag">nodejs</a>, <a class="-none-link" href="/tags/python/" rel="tag">python</a>, <a class="-none-link" href="/tags/uWSGI/" rel="tag">uWSGI</a>
</span><a class="btn-border-small" href="/2017/05/17/Senderéƒ¨ç½²/"></a></div>
                       
            </div>
        
     
   
   
  
</section>

  

            <footer class="footer">
    <span class="footer__copyright">
        &copy; 2021 lc4t
       
    </span>
    <span class="footer__copyright">
            
         </span>
       
    
    
</footer>


        </div>
    </div>

     
<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-96200907-1', 'auto');
	ga('send', 'pageview');
</script>

    
    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?a9801aa00a5615a147c66e9f1f2893c6";
            var s = document.getElementsByTagName("script")[0]; 
            s.parentNode.insertBefore(hm, s);
        })();
    </script>



    <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    
    
</body>
</html>
